package cn.ondu.chat.bean

import cn.ondu.chat.Config

/**
 * @author: lcc
 * @date: 2021/3/7
 * @GitHub:
 * @email：lidaryl@163.com
 * @description: 正常情况下的baseBean 部分接口不需要
 */
sealed class JStatus<T>(
    val status: Int? = null,
    val message: String? = null,
    val data: T? = null
) {
    class LoadingStatus<T> : JStatus<T>()
    class EndStatus<T>(status: Int, message: String?= null, data: T? = null) : JStatus<T>(status, message, data)
}


/**
 * 极光返回数据相关解析
 */
inline fun <T> JStatus<T>.jMessageParsing(
    onLoading: () -> Unit = {}, onError: (message: String?) -> Unit = {}
    , onFinish: () -> Unit = {}, onSuccess: (t: T?) -> Unit
) {
    when (this) {
        is JStatus.LoadingStatus -> onLoading()
        is JStatus.EndStatus -> {
            if (status == Config.HTTP_SUCCESS_CODE) {
                onSuccess(data)
            } else {
                onError(statusToMessage(status!!, message))
            }
        }
    }
    onFinish()
}


fun statusToMessage(status: Int, message: String?): String = when (status) {
    0 -> "成功"
    871101 -> "请求参数不合法"
    871102 -> "请求失败，请检查网络"
    871103 -> "服务器内部错误"
    871104 -> "服务器内部错误"
    871105 -> "请求的用户信息不存在"
    871201 -> "响应超时"
    871300 -> "api调用发起者尚未登录"
    871301 -> "api调用传入的参数不合法"
    871302 -> "发送消息的消息体过大，整个消息体大小不能超过4k"
    871303 -> "用户名不合法"
    871304 -> "密码不合法"
    871305 -> "名称不合法（包括nickname groupname notename）"
    871306 -> "其他输入不合法"
    871307 -> "添加或移除群成员时，传入的成员列表中有用户不存在"
    871308 -> "SDK尚未初始化"
    871309 -> "消息中包含的文件不存在"
    871310 -> "网络连接已断开，请检查网络"
    871311 -> "用户未设定头像，下载头像失败"
    871312 -> "创建ImageContent失败"
    871313 -> "消息解析出错，协议版本号不匹配"
    871314 -> "消息解析出错，缺少关键参数"
    871315 -> "消息解析出错"
    871317 -> "操作目标用户不能是自己"
    871318 -> "不合法的消息体，出现这个问题可能是由于上层没有参照集成文档进行混淆配置导致的，关于jmessage的混淆配置见集成指南"
    871319 -> "创建转发消息失败，具体原因见logcat打印"
    871320 -> "将消息标记为已读时出现问题，可能这条消息已经是已读状态，或者这条消息本身不是接受类型的消息"
    871321 -> "获取未回执详情失败，只有消息的发送者可以查询消息的未回执详情"
    871322 -> "获取未回执详情失败，这条消息尚未成功发送，只有成功发送的消息可以查询未回执详情"
    871323 -> "请求的聊天室信息未找到，该聊天室不存在"
    871324 -> "发送消息时消息体类型不合法，注意eventNotification和prompt类型的消息体不能发送"
    871325 -> "发送消息时消息状态不合法，只有消息状态为创建和发送失败的消息可以被发送"
    871326 -> "不支持的操作，例如聊天室撤回消息"
    871327 -> "操作已被取消，上层调用取消接口（消息发送取消，附件下载取消），取消成功后返回此错误码"
    871402 -> "文件上传失败"
    871403 -> "文件上传失败"
    871404 -> "文件下载失败"
    871501 -> "appkey与包名不匹配或者token无效"
    871502 -> "请检查 AndroidManifest.xml 里的 appKey 配置，它必须是从 JPush 控制台创建应用得到的。"
    871503 -> "appKey与平台不匹配。有可能在 JPush 控制台上，未配置此 appKey 支持 Android 平台。"
    871504 -> "Push 注册未完成，请稍后重试。如果持续出现这个问题，可能你的 JPush 配置不正确。"
    871505 -> "Push 注册失败,对应包名在控制台上不存在。"
    871506 -> "Push 注册失败，设备IMEI不合法"
    898000 -> "内部错误"
    898001 -> "用户已存在"
    898002 -> "用户不存在, 并且指出了不存在的用户名称"
    898003 -> "请求参数不合法"
    898004 -> "更新密码操作，用户密码错误"
    898006 -> "Group id不存在"
    898007 -> "	校验信息为空"
    898008 -> "	校验失败"
    898009 -> "appkey不存在"
    898010 -> "API请求 token 过期。正常情况下SDK会自动重新获取 token。"
    898011 -> "	查询的appkey不具备跨应用权限 或者appkey不存在"
    898030 -> "系统繁忙，稍后重试"
    898031 -> "音视频服务还未开通，请参考doc和portal里的规则开通服务"
    899000 -> "系统内部错误"
    899001 -> "	用户已存在"
    899002 -> "	用户不存在"
    899003 -> "	参数错误，Request Body参数不符合要求;resend 值不符合要求;用户名或者密码不合法;群组Group id不合法"
    899006 -> "	Group id 不存在"
    899007 -> "	校验信息为空"
    899008 -> "校验失败"
    899009 -> "	Appkey不存在"
    899011 -> "重复添加群成员"
    899012 -> "	没有足够位置添加此次请求的成员"
    899013 -> "	注册列表大于500，批量注册最大长度为500"
    899014 -> "	添加操作操作成功 remove操作有username不存在讨论组中 remove失败"
    899015 -> "	用户加入讨论组达到上限"
    899016 -> "	用户没有管理员权限发送信息"
    899017 -> "	用户已经被添加进黑名单"
    899018 -> "	管理员不能被添加进黑名单"
    899019 -> "	删除目标黑名单用户不存在黑名单中"
    899020 -> "	跨应用失败"
    899021 -> "	查询失败 应该使用跨应用api"
    899043 -> "	已经设置此用户为消息免打扰，重复设置错误"
    899044 -> "	取消消息免打扰用户时，该用户不存在当前设置中"
    899045 -> "	设置群组消息免打扰时，群组不存在该系统中"
    899046 -> "	设置群组消息免打扰时，设置的群组，用户不在该群组中"
    899047 -> "	已经设置此群组为消息免打扰，重复设置错误"
    899048 -> "已经设置全局为消息免打扰，重复设置错误"
    899049 -> "	取消消息免打扰群组时，该群组不存在当前设置中"
    899050 -> "	已经设置全局为消息免打扰，重复设置错误"
    899070 -> "	添加的好友已经存在好友列表中"
    899071 -> "	更新的好友不存在好友列表中"
    899030 -> "	系统繁忙，稍后重试"
    899081 -> "	聊天室ID不存在"
    899082 -> "	用户不在聊天室中"
    800003 -> "appkey未注册"
    800005 -> "用户ID未注册（appkey无该UID）"
    800006 -> "	用户ID不存在（数据库中无该UID）"
    800008 -> "	请求类型无法识别"
    800009 -> "	服务器系统错误"
    800012 -> "	发起的用户处于登出状态，账号注册以后从未登录过，需要先登录"
    800013 -> "发起的用户处于登出状态，请求的用户已经登出，需要先登录"
    800014 -> "	发起的用户appkey与目标不匹配"
    800016 -> "	发起的用户设备不匹配,当前请求的设备与上次登录的设备不匹配导致，需要先登录"
    800017 -> "发送请求频率超过系统限制"
    800018 -> "	群组ID不存在"
    800019 -> "	请求用户不在群组中"
    800020 -> "	请求用户无操作权限"
    801003 -> "	登录的用户名未注册，登录失败"
    801004 -> "	登录的用户密码错误，登录失败"
    801005 -> "	登录的用户设备有误，登录失败"
    801006 -> "	登录的用户被禁用，登录失败"
    801007 -> "	多通道同时登录错误，登录失败"
    802002 -> "登出用户名和登录用户名不匹配，登出失败"
    803001 -> "发送消息失败，状态存储异常"
    803002 -> "发送消息失败，系统网络异常"
    803003 -> "	发送消息失败，目标用户未注册或不存在"
    803004 -> "	发送消息失败，目标讨论组不存在"
    803005 -> "	发送消息失败，发起者不在目标讨论组中"
    803006 -> "	发送消息失败，发起者权限不够或者类别不匹配"
    803007 -> "	发送消息失败，消息长度超过限制"
    803008 -> "	发送消息失败，发送者已被接收者拉入黑名单，仅限单聊"
    803009 -> "发送消息失败，消息内容包含敏感词汇：具体敏感词"
    803010 -> "发送消息失败，发送频率超过系统限制，无法发送，客户端限制每分钟60条"
    803011 -> "	发送消息失败，消息格式配置错误"
    803012 -> "	发送消息失败，请求用户被管理员禁言"
    805001 -> "目标用户不存在"
    805002 -> "	添加好友失败：双方已经是好友"
    805003 -> "	删除好友失败：目标用户并不是自己的好友"
    805004 -> "	修改好友备注失败：备注内容无效，无法修改"
    805006 -> "	添加好友失败：邀请事件无效"
    808001 -> "创建群组时群名为空，创建群组失败"
    808002 -> "用户无创建群组权限，创建群组失败"
    808003 -> "	用户拥有的群组数量已达上限,无法再创建"
    808004 -> "	群组名长度超出上限，创建群组失败"
    808005 -> "群组描述长度超出上限，创建群组失败"
    808006 -> "	创建群组时指定成员人数上限错误"
    810001 -> "	目标用户在群组黑名单中，无法加入"
    810002 -> "	添加的成员列表为空"
    810005 -> "添加的成员列表中包含未注册成员"
    810007 -> "	添加的成员列表中有成员重复添加"
    810008 -> "	添加的成员数量超出群组拥有的最大成员数上限"
    810009 -> "	添加的成员列表中有成员拥有的群组数量已达上限"
    811002 -> "	删除的成员列表为空"
    811005 -> "	删除的成员列表中有成员未注册"
    811006 -> "	删除的成员列表中有成员该用户没有权限进行删除"
    811007 -> "	删除的成员列表中有成员重复删除"
    811008 -> "	删除的成员列表中有成员不在该群组中"
    812003 -> "	群组名超出长度上限"
    812004 -> "	群组描述超出上限"
    818001 -> "	用户添加黑名单时，成员列表为空，添加失败"
    818002 -> "	用户添加黑名单时，成员列表中有成员不存在，添加失败"
    818003 -> "	用户添加黑名单时，成员列表中有成员不能被添加，添加失败"
    818004 -> "	重复添加"
    818005 -> "	超过黑名单最大限制"
    818006 -> "	目标用户列表中存在不允许加入黑名单的用户"
    819001 -> "用户移除好友出黑名单时，成员列表为空，操作失败"
    819002 -> "	用户删除黑名单时，成员列表中有成员不存在，删除失败"
    819003 -> "	重复删除"
    819004 -> "	待删除的黑名单用户不在黑名单中"
    831001 -> "	用户添加成员消息免打扰时，该成员已处于免打扰状态"
    832001 -> "	用户删除成员消息免打扰时，该成员不处于免打扰状态"
    833001 -> "	用户添加群组消息免打扰时，该群组不存在"
    833002 -> "	用户添加群组消息免打扰时，用户不存在该群组中"
    833003 -> "	用户添加群组消息免打扰时，该群组已处于免打扰状态"
    834001 -> "用户删除群组消息免打扰时，该群组不处于免打扰状态"
    835001 -> "	用户添加全局消息免打扰时，该用户已处于全局免打扰状态"
    836001 -> "	用户删除全局消息免打扰时，该用户不处于全局免打扰状态"
    842001 -> "	用户添加群组消息屏蔽时，该群组不存在"
    842002 -> "用户添加群组消息屏蔽时，用户不在该群组中"
    842003 -> "用户添加群组消息屏蔽时，该群组已处于消息屏蔽状态"
    843001 -> "	用户删除群组消息屏蔽时，该群组不处于消息屏蔽状态"
    847001 -> "	发送聊天室消息失败，发起者不在该聊天室中"
    847002 -> "	发送聊天室消息失败，发起者在该聊天室中被禁言"
    847003 -> "	发送聊天室消息失败，该聊天室不存在"
    847004 -> "	发送聊天室消息失败，消息长度超过限制"
    847005 -> "	发送聊天室消息失败，消息内容格式错误"
    850001 -> "删除不存在的聊天室"
    851001 -> "	邀请成员到聊天室时，邀请的成员列表中有重复的成员，邀请失败"
    851002 -> "邀请成员到聊天室时，邀请的成员列表中有未注册成员，邀请失败"
    851003 -> "	邀请或加入到聊天室时，邀请或加入的成员已在聊天室中，邀请或加入失败"
    851004 -> "邀请或加入不存在的聊天室"
    851005 -> "	邀请成员到聊天室时，邀请的成员列表为空，邀请成员失败"
    851006 -> "	邀请或加入聊天时，邀请的人员数量超过聊天室剩余加入的人员数量"
    851007 -> "	邀请或加入聊天室时，邀请或加入的人员已被列入了黑名单"
    852001 -> "	踢出或退出聊天室时，该用户其实并不在该聊天室中，踢出或退出聊天室失败"
    852002 -> "	踢出或退出不存在的聊天室"
    852003 -> "	踢出成员到聊天室时，踢出的成员列表为空，踢出成员失败"
    852004 -> "	踢出或退出聊天室时，存在owner用户退出聊天室"
    853001 -> "	更新不存在的聊天室信息"
    853002 -> "更新聊天室owner时，新的owner并不在该聊天室中"
    855001 -> "消息撤回失败，超出撤回时间"
    855002 -> "消息撤回失败，请求撤回方不是消息发送方"
    855003 -> "	消息撤回失败，请求撤回消息不存在"
    855004 -> "消息撤回失败，该消息已经撤回"
    856001 -> "	审批失效，该添加成员邀请已经被处理"
    856002 -> "	请求数据无效"
    857001 -> "目标群组不存在"
    857002 -> "	目标不在线"
    857003 -> "	目标用户不存在"
    857004 -> "	透传消息长度超过限制"
    857005 -> "	请求用户不在群组中"
    857006 -> "	目标不能为自己"
    859001 -> "	用户已经在目标群组中"
    859002 -> "	目标群组类型不支持申请入群"
    786001 -> "	群公告长度超出上限"
    787001 -> "	待删除公告不存在"
    765001 -> "	目标用户不在群组中"
    765002 -> "请求用户无操作权限"
    7130001 -> "用户没有权限设置管理员"
    7130002 -> "	设置为管理员的成员已经是管理员"
    7130003 -> "	设置为管理员的成员是个聊天室owner"
    7130004 -> "	超过管理员最大数量"
    7130005 -> "	聊天室不存在"
    7130006 -> "	设置为管理员的成员不在聊天室中"
    7130007 -> "	设置目标为空"
    7131001 -> "	用户没有权限删除管理员资格（只有owner才能删除管理员资格）"
    7131002 -> "	对不是管理员的用户删除其管理员资格"
    7132001 -> "	用户没有权限设置黑名单"
    7132002 -> "owner不能被设为黑名单"
    7132003 -> "	管理员不能被设为黑名单"
    7132004 -> "	聊天室不存在"
    7132005 -> "	超过黑名单最大数量"
    7132006 -> "添加黑名单的成员已在黑名单中"
    7132007 -> "设置目标为空"
    7133001 -> "	删除黑名单的成员不在黑名单中"
    7100001 -> "	音视频信令通知目标用户为空或者目标已全部登出"
    7100002 -> "	音视频被邀请的用户已登出"
    7100006 -> "	音视频服务试用时长不够，停用"
    else -> message ?: ""
}